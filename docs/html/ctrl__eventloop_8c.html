<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<title>upkeeper: controller/ctrl_eventloop.c File Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<link href="doxygen.css" rel="stylesheet" type="text/css"/>
</head>
<body>
<!-- Generated by Doxygen 1.7.4 -->
<div id="top">
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td style="padding-left: 0.5em;">
   <div id="projectname">upkeeper&#160;<span id="projectnumber">1</span></div>
  </td>
 </tr>
 </tbody>
</table>
</div>
  <div id="navrow1" class="tabs">
    <ul class="tablist">
      <li><a href="index.html"><span>Main&#160;Page</span></a></li>
      <li><a href="modules.html"><span>Modules</span></a></li>
      <li><a href="annotated.html"><span>Data&#160;Structures</span></a></li>
      <li class="current"><a href="files.html"><span>Files</span></a></li>
    </ul>
  </div>
  <div id="navrow2" class="tabs2">
    <ul class="tablist">
      <li><a href="files.html"><span>File&#160;List</span></a></li>
      <li><a href="globals.html"><span>Globals</span></a></li>
    </ul>
  </div>
</div>
<div class="header">
  <div class="summary">
<a href="#func-members">Functions</a> &#124;
<a href="#var-members">Variables</a>  </div>
  <div class="headertitle">
<div class="title">controller/ctrl_eventloop.c File Reference</div>  </div>
</div>
<div class="contents">
<div class="textblock"><code>#include &quot;<a class="el" href="controller_8h_source.html">controller.h</a>&quot;</code><br/>
<code>#include &lt;stdio.h&gt;</code><br/>
<code>#include &lt;errno.h&gt;</code><br/>
</div><div class="textblock"><div class="dynheader">
Include dependency graph for ctrl_eventloop.c:</div>
<div class="dyncontent">
<div class="center"><img src="ctrl__eventloop_8c__incl.png" border="0" usemap="#controller_2ctrl__eventloop_8c" alt=""/></div>
<map name="controller_2ctrl__eventloop_8c" id="controller_2ctrl__eventloop_8c">
<area shape="rect" id="node3" href="controller_8h.html" title="controller.h" alt="" coords="1187,85,1272,117"/><area shape="rect" id="node5" href="upkeeper_8h.html" title="upkeeper.h" alt="" coords="1237,165,1323,197"/><area shape="rect" id="node109" href="ctrl__protocol_8h.html" title="types used to communicate with buddy." alt="" coords="643,245,747,277"/><area shape="rect" id="node7" href="upk__include_8h.html" title="upkeeper/upk_include.h" alt="" coords="1201,245,1359,277"/><area shape="rect" id="node9" href="upk__std__include_8h.html" title="upk_std_include.h" alt="" coords="1235,645,1360,677"/><area shape="rect" id="node11" href="upk__compat_8h.html" title="upk_compat.h" alt="" coords="108,725,212,757"/><area shape="rect" id="node63" href="upk__uuid_8h.html" title="definition of upk uuid implementation." alt="" coords="1177,565,1260,597"/><area shape="rect" id="node66" href="upk__types_8h.html" title="types common throughout libupkeeper." alt="" coords="1331,485,1421,517"/><area shape="rect" id="node69" href="upk__v0__protocol__structs_8h.html" title="upk_v0_protocol_structs.h" alt="" coords="1752,565,1925,597"/><area shape="rect" id="node72" href="upk__error_8h.html" title="handle errors and single&#45;exit&#45;point semantics." alt="" coords="1472,485,1557,517"/><area shape="rect" id="node77" href="upk__json__fmt_8h.html" title="upk_json_fmt.h" alt="" coords="821,325,931,357"/><area shape="rect" id="node79" href="upk__config_8h.html" title="configuration implementation for controller and services." alt="" coords="955,325,1051,357"/><area shape="rect" id="node82" href="upk__crc32_8h.html" title="upk_crc32.h" alt="" coords="1952,405,2043,437"/><area shape="rect" id="node85" href="upk__protocol_8h.html" title="UPK networking protocol." alt="" coords="1679,405,1785,437"/><area shape="rect" id="node93" href="upk__v0__protocol_8h.html" title="upk_v0_protocol.h" alt="" coords="1749,325,1877,357"/><area shape="rect" id="node98" href="upk__network_8h.html" title="upk_network.h" alt="" coords="1227,325,1333,357"/><area shape="rect" id="node101" href="upk__client__net_8h.html" title="upk_client_net.h" alt="" coords="1357,325,1472,357"/><area shape="rect" id="node103" href="upk__client_8h.html" title="upk_client.h" alt="" coords="1223,405,1313,437"/><area shape="rect" id="node106" href="upk__util_8h.html" title="upk_util.h" alt="" coords="1547,325,1624,357"/><area shape="rect" id="node13" href="upkeeper__config_8h.html" title="upkeeper_config.h" alt="" coords="9,805,137,837"/><area shape="rect" id="node91" href="upk__network__types_8h.html" title="upk_network_types.h" alt="" coords="1632,485,1776,517"/><area shape="rect" id="node111" href="buddyinc_8h.html" title="buddyinc.h" alt="" coords="597,485,680,517"/></map>
</div>
</div><table class="memberdecls">
<tr><td colspan="2"><h2><a name="func-members"></a>
Functions</h2></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="ctrl__eventloop_8c.html#a741093d702f88c44f02aa5fbbd20f3b7">controller_packet_callback</a> (<a class="el" href="structupk__conn__handle__meta__p.html">upk_conn_handle_meta_t</a> *clients, <a class="el" href="struct__upk__payload.html">upk_payload_t</a> *)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="ctrl__eventloop_8c.html#a5112d1e28056ffe613e005caf9066db3">ctrl_req_action_handler</a> (<a class="el" href="structupk__conn__handle__meta__p.html">upk_conn_handle_meta_t</a> *clients, <a class="el" href="struct__upk__payload.html">upk_payload_t</a> *msg)</td></tr>
<tr><td class="mdescLeft">&#160;</td><td class="mdescRight">Handler to call when an action request is received from a client, signature is of upk_net_callback_t,.  <a href="#a5112d1e28056ffe613e005caf9066db3"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="ctrl__eventloop_8c.html#abe67c79dacfd5a3938a3eea359bbc293">ctrl_req_preamble_handler</a> (<a class="el" href="structupk__conn__handle__meta__p.html">upk_conn_handle_meta_t</a> *clients, <a class="el" href="struct__upk__payload.html">upk_payload_t</a> *msg)</td></tr>
<tr><td class="mdescLeft">&#160;</td><td class="mdescRight">Handler to call when an preamble request is received from a client, signature is of upk_net_callback_t,.  <a href="#abe67c79dacfd5a3938a3eea359bbc293"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="ctrl__eventloop_8c.html#a4f1536d3d1e98d423cf2127594f407e8">ctrl_req_disconnect_handler</a> (<a class="el" href="structupk__conn__handle__meta__p.html">upk_conn_handle_meta_t</a> *clients, <a class="el" href="struct__upk__payload.html">upk_payload_t</a> *msg)</td></tr>
<tr><td class="mdescLeft">&#160;</td><td class="mdescRight">Handler to call when an disconnect request is received from a client, signature is of upk_net_callback_t,.  <a href="#a4f1536d3d1e98d423cf2127594f407e8"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">static void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="ctrl__eventloop_8c.html#a17b8185080472699e32223cdf67f28e0">init_callback_handlers</a> (<a class="el" href="structupk__conn__handle__meta__p.html">upk_conn_handle_meta_t</a> *clients)</td></tr>
<tr><td class="mdescLeft">&#160;</td><td class="mdescRight">setup initial callback handlers  <a href="#a17b8185080472699e32223cdf67f28e0"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">static void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="ctrl__eventloop_8c.html#a8b37090bbf8a037f548ce443b49a064a">ctrl_accept_conn</a> (int32_t listen_sock, <a class="el" href="structupk__conn__handle__meta__p.html">upk_conn_handle_meta_t</a> *clients)</td></tr>
<tr><td class="mdescLeft">&#160;</td><td class="mdescRight"><a class="el" href="controller_2tp_8c.html#a27d7dff6f11f268fb5bdad349a32a548">accept()</a> and setup a handle for an incomming connection.  <a href="#a8b37090bbf8a037f548ce443b49a064a"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="ctrl__eventloop_8c.html#a39174bf64f8dd75ed3e494b33e2f3b12">sa_sigaction_func</a> (int signal, <a class="el" href="structsiginfo.html">siginfo_t</a> *<a class="el" href="structsiginfo.html">siginfo</a>, void *<a class="el" href="structucontext.html">ucontext</a>)</td></tr>
<tr><td class="mdescLeft">&#160;</td><td class="mdescRight">place received signals into a queue to handle later.  <a href="#a39174bf64f8dd75ed3e494b33e2f3b12"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="ctrl__eventloop_8c.html#ae150e0430351943d2feb1798ce483d10">ctrl_exit_cleanup</a> (void)</td></tr>
<tr><td class="mdescLeft">&#160;</td><td class="mdescRight">cleanup allocated structures at exit; makes valgrind happy, so I can find more signicant issues  <a href="#ae150e0430351943d2feb1798ce483d10"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">static void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="ctrl__eventloop_8c.html#a7dd0909c839d869fe05e1cf8d4af19e2">ctrl_setup_sighandlers</a> (void)</td></tr>
<tr><td class="mdescLeft">&#160;</td><td class="mdescRight">setup signal handlers  <a href="#a7dd0909c839d869fe05e1cf8d4af19e2"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="el" href="structupk__conn__handle__meta__p.html">upk_conn_handle_meta_t</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="ctrl__eventloop_8c.html#a22e1808ae5381c736fb81ab04a0b44f3">ctrl_init</a> (void)</td></tr>
<tr><td class="mdescLeft">&#160;</td><td class="mdescRight">initialization before eventloop  <a href="#a22e1808ae5381c736fb81ab04a0b44f3"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="ctrl__eventloop_8c.html#afcb5edca8881b0c26ccbc120775ed38b">event_loop</a> (int32_t listen_sock)</td></tr>
<tr><td class="mdescLeft">&#160;</td><td class="mdescRight">the main event loop.  <a href="#afcb5edca8881b0c26ccbc120775ed38b"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">int32_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="ctrl__eventloop_8c.html#ad055a2a21d52bb93290db5ecee7b62b5">ctrl_sock_setup</a> (void)</td></tr>
<tr><td class="mdescLeft">&#160;</td><td class="mdescRight">setup controller's socket  <a href="#ad055a2a21d52bb93290db5ecee7b62b5"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="ctrl__eventloop_8c.html#ad90d54275c3f302332ac0724037f3371">handle_signals</a> (void)</td></tr>
<tr><td class="mdescLeft">&#160;</td><td class="mdescRight">deal with signals pending action in signal_queue.  <a href="#ad90d54275c3f302332ac0724037f3371"></a><br/></td></tr>
<tr><td colspan="2"><h2><a name="var-members"></a>
Variables</h2></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">static <a class="el" href="structctrl__sigqueue__meta__p.html">ctrl_sigqueue_meta_t</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="ctrl__eventloop_8c.html#a09a9da48820270547e0a56b3d6e98bd1">ctrl_signal_queue</a></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">static <a class="el" href="structupk__conn__handle__meta__p.html">upk_conn_handle_meta_t</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="ctrl__eventloop_8c.html#aafb584a009e319bc5b3cf6dc57227c63">clients_list_for_cleanup</a></td></tr>
</table>
<hr/><h2>Function Documentation</h2>
<a class="anchor" id="a741093d702f88c44f02aa5fbbd20f3b7"></a><!-- doxytag: member="ctrl_eventloop.c::controller_packet_callback" ref="a741093d702f88c44f02aa5fbbd20f3b7" args="(upk_conn_handle_meta_t *clients, upk_payload_t *)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void controller_packet_callback </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="structupk__conn__handle__meta__p.html">upk_conn_handle_meta_t</a> *&#160;</td>
          <td class="paramname"><em>clients</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="struct__upk__payload.html">upk_payload_t</a> *&#160;</td>
          <td class="paramname">&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

</div>
</div>
<a class="anchor" id="a8b37090bbf8a037f548ce443b49a064a"></a><!-- doxytag: member="ctrl_eventloop.c::ctrl_accept_conn" ref="a8b37090bbf8a037f548ce443b49a064a" args="(int32_t listen_sock, upk_conn_handle_meta_t *clients)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">static void ctrl_accept_conn </td>
          <td>(</td>
          <td class="paramtype">int32_t&#160;</td>
          <td class="paramname"><em>listen_sock</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="structupk__conn__handle__meta__p.html">upk_conn_handle_meta_t</a> *&#160;</td>
          <td class="paramname"><em>clients</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td><code> [static]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p><a class="el" href="controller_2tp_8c.html#a27d7dff6f11f268fb5bdad349a32a548">accept()</a> and setup a handle for an incomming connection. </p>
<p>***************************************************************************************************************** </p>
<dl><dt><b>Parameters:</b></dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">listen_sock</td><td>The socket the request is coming in on. </td></tr>
    <tr><td class="paramdir">[in,out]</td><td class="paramname">clients</td><td>The llist of clients, which will be modified if the connection is accepted. </td></tr>
  </table>
  </dd>
</dl>

<p>References <a class="el" href="controller_2tp_8c.html#a27d7dff6f11f268fb5bdad349a32a548">accept()</a>, and <a class="el" href="group__upk__network.html#gabcfe587ed0836f5c3bd320f460e04b0a">upk_net_add_socket_handle()</a>.</p>

<p>Referenced by <a class="el" href="tp_8c.html#afcb5edca8881b0c26ccbc120775ed38b">event_loop()</a>.</p>

<p><div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="ctrl__eventloop_8c_a8b37090bbf8a037f548ce443b49a064a_cgraph.png" border="0" usemap="#ctrl__eventloop_8c_a8b37090bbf8a037f548ce443b49a064a_cgraph" alt=""/></div>
<map name="ctrl__eventloop_8c_a8b37090bbf8a037f548ce443b49a064a_cgraph" id="ctrl__eventloop_8c_a8b37090bbf8a037f548ce443b49a064a_cgraph">
<area shape="rect" id="node3" href="controller_2tp_8c.html#a27d7dff6f11f268fb5bdad349a32a548" title="accept" alt="" coords="237,5,296,37"/><area shape="rect" id="node5" href="group__upk__network.html#gabcfe587ed0836f5c3bd320f460e04b0a" title="add a new socket handle to the handles list" alt="" coords="173,61,360,93"/></map>
</div>
</p>

<p><div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="ctrl__eventloop_8c_a8b37090bbf8a037f548ce443b49a064a_icgraph.png" border="0" usemap="#ctrl__eventloop_8c_a8b37090bbf8a037f548ce443b49a064a_icgraph" alt=""/></div>
<map name="ctrl__eventloop_8c_a8b37090bbf8a037f548ce443b49a064a_icgraph" id="ctrl__eventloop_8c_a8b37090bbf8a037f548ce443b49a064a_icgraph">
<area shape="rect" id="node3" href="tp_8c.html#afcb5edca8881b0c26ccbc120775ed38b" title="the main event loop." alt="" coords="175,5,257,37"/></map>
</div>
</p>

</div>
</div>
<a class="anchor" id="ae150e0430351943d2feb1798ce483d10"></a><!-- doxytag: member="ctrl_eventloop.c::ctrl_exit_cleanup" ref="ae150e0430351943d2feb1798ce483d10" args="(void)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void ctrl_exit_cleanup </td>
          <td>(</td>
          <td class="paramtype">void&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>cleanup allocated structures at exit; makes valgrind happy, so I can find more signicant issues </p>
<p>***************************************************************************************************************** </p>

<p>References <a class="el" href="upk__types_8h.html#a36ae7556094301c62e5445ed3b9c977b">UPKLIST_FREE</a>.</p>

<p>Referenced by <a class="el" href="ctrl__eventloop_8c.html#a22e1808ae5381c736fb81ab04a0b44f3">ctrl_init()</a>.</p>

<p><div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="ctrl__eventloop_8c_ae150e0430351943d2feb1798ce483d10_icgraph.png" border="0" usemap="#ctrl__eventloop_8c_ae150e0430351943d2feb1798ce483d10_icgraph" alt=""/></div>
<map name="ctrl__eventloop_8c_ae150e0430351943d2feb1798ce483d10_icgraph" id="ctrl__eventloop_8c_ae150e0430351943d2feb1798ce483d10_icgraph">
<area shape="rect" id="node3" href="ctrl__eventloop_8c.html#a22e1808ae5381c736fb81ab04a0b44f3" title="initialization before eventloop" alt="" coords="173,5,237,37"/><area shape="rect" id="node5" href="tp_8c.html#afcb5edca8881b0c26ccbc120775ed38b" title="the main event loop." alt="" coords="287,5,369,37"/></map>
</div>
</p>

</div>
</div>
<a class="anchor" id="a22e1808ae5381c736fb81ab04a0b44f3"></a><!-- doxytag: member="ctrl_eventloop.c::ctrl_init" ref="a22e1808ae5381c736fb81ab04a0b44f3" args="(void)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="structupk__conn__handle__meta__p.html">upk_conn_handle_meta_t</a>* ctrl_init </td>
          <td>(</td>
          <td class="paramtype">void&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>initialization before eventloop </p>
<p>***************************************************************************************************************** This will handle signals, poll buddies, poll clients, publish events, and cleanup sockets. </p>

<p>References <a class="el" href="controller_2tp_8c.html#a697ee1f5faa14a79182911f6b504aaf1">calloc()</a>, <a class="el" href="ctrl__eventloop_8c.html#ae150e0430351943d2feb1798ce483d10">ctrl_exit_cleanup()</a>, <a class="el" href="ctrl__eventloop_8c.html#a7dd0909c839d869fe05e1cf8d4af19e2">ctrl_setup_sighandlers()</a>, <a class="el" href="ctrl__eventloop_8c.html#a17b8185080472699e32223cdf67f28e0">init_callback_handlers()</a>, and <a class="el" href="group__upk__network.html#gad7911c4e22d988a43a3a0e243a94f15a">upk_net_conn_handles_init()</a>.</p>

<p>Referenced by <a class="el" href="tp_8c.html#afcb5edca8881b0c26ccbc120775ed38b">event_loop()</a>.</p>

<p><div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="ctrl__eventloop_8c_a22e1808ae5381c736fb81ab04a0b44f3_cgraph.png" border="0" usemap="#ctrl__eventloop_8c_a22e1808ae5381c736fb81ab04a0b44f3_cgraph" alt=""/></div>
<map name="ctrl__eventloop_8c_a22e1808ae5381c736fb81ab04a0b44f3_cgraph" id="ctrl__eventloop_8c_a22e1808ae5381c736fb81ab04a0b44f3_cgraph">
<area shape="rect" id="node3" href="controller_2tp_8c.html#a697ee1f5faa14a79182911f6b504aaf1" title="calloc" alt="" coords="179,48,235,80"/><area shape="rect" id="node5" href="ctrl__eventloop_8c.html#ae150e0430351943d2feb1798ce483d10" title="cleanup allocated structures at exit; makes valgrind happy, so I can find more signicant issues..." alt="" coords="147,104,267,136"/><area shape="rect" id="node7" href="ctrl__eventloop_8c.html#a7dd0909c839d869fe05e1cf8d4af19e2" title="setup signal handlers" alt="" coords="131,160,283,192"/><area shape="rect" id="node17" href="ctrl__eventloop_8c.html#a17b8185080472699e32223cdf67f28e0" title="setup initial callback handlers" alt="" coords="132,244,281,276"/><area shape="rect" id="node49" href="group__upk__network.html#gad7911c4e22d988a43a3a0e243a94f15a" title="initialize connection handles" alt="" coords="117,300,296,332"/><area shape="rect" id="node9" href="ctrl__eventloop_8c.html#a39174bf64f8dd75ed3e494b33e2f3b12" title="place received signals into a queue to handle later." alt="" coords="373,5,499,37"/><area shape="rect" id="node11" href="controller_2tp_8c.html#a740db5cb700ac655b93536abe01082d6" title="sigaction" alt="" coords="400,61,472,93"/><area shape="rect" id="node13" href="controller_2tp_8c.html#a57087bdf7ca8b526bb80dbe390ccf297" title="sigemptyset" alt="" coords="391,117,481,149"/><area shape="rect" id="node15" href="controller_2tp_8c.html#a6c3013276048e468267eca29fdd44d0a" title="sigfillset" alt="" coords="401,173,471,205"/><area shape="rect" id="node19" href="ctrl__eventloop_8c.html#a5112d1e28056ffe613e005caf9066db3" title="Handler to call when an action request is received from a client, signature is of upk_net_callback_t..." alt="" coords="359,229,513,261"/><area shape="rect" id="node33" href="ctrl__eventloop_8c.html#a4f1536d3d1e98d423cf2127594f407e8" title="Handler to call when an disconnect request is received from a client, signature is of upk_net_callbac..." alt="" coords="344,341,528,373"/><area shape="rect" id="node41" href="ctrl__eventloop_8c.html#abe67c79dacfd5a3938a3eea359bbc293" title="Handler to call when an preamble request is received from a client, signature is of upk_net_callback_..." alt="" coords="349,285,523,317"/><area shape="rect" id="node47" href="group__upk__network.html#gab68ed7f2471a6e482a2ebbaa0a3b1ec2" title="extract the nested global_state component from the generic (void *) userdata element" alt="" coords="352,397,520,429"/><area shape="rect" id="node21" href="controller_8h.html#a732e458dbb31507c5d6e25fe8051c526" title="reload_buddy_svc" alt="" coords="607,229,732,261"/><area shape="rect" id="node23" href="controller_8h.html#abac768e7b1b76398ad7e25e651f776ea" title="start_buddy_svc" alt="" coords="611,61,728,93"/><area shape="rect" id="node25" href="controller_8h.html#af36be3e8ca1253b0d412f404dcde2629" title="stop_buddy_svc" alt="" coords="612,117,727,149"/><area shape="rect" id="node27" href="controller_2tp_8c.html#a9bb3a8bef56da031c13cdd2099224313" title="upk_create_repl_result" alt="" coords="593,173,745,205"/><area shape="rect" id="node29" href="group__upk__network.html#gab7efe972a36f4f23cb9b811892cf142c" title="upk_pkt_free" alt="" coords="621,285,717,317"/><area shape="rect" id="node31" href="group__upk__network.html#ga995978d17c5c389c2acd4175264bcfc9" title="enqueue a packet for sending" alt="" coords="604,341,735,373"/><area shape="rect" id="node35" href="group__upk__network.html#gae0326e499d4821a8e2c5b0d52a456155" title="upk_create_req_disconnect" alt="" coords="580,509,759,541"/><area shape="rect" id="node37" href="group__upk__network.html#ga85c0c3d99b75f2d2b40a41ca4b3c1b9c" title="wrapper around upk&#45;disconnect_handle for use as a callback." alt="" coords="577,453,761,485"/><area shape="rect" id="node43" href="group__upk__network.html#ga8783766294f8c67dd8390b90f26f046e" title="upk_create_repl_preamble" alt="" coords="583,397,756,429"/></map>
</div>
</p>

<p><div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="ctrl__eventloop_8c_a22e1808ae5381c736fb81ab04a0b44f3_icgraph.png" border="0" usemap="#ctrl__eventloop_8c_a22e1808ae5381c736fb81ab04a0b44f3_icgraph" alt=""/></div>
<map name="ctrl__eventloop_8c_a22e1808ae5381c736fb81ab04a0b44f3_icgraph" id="ctrl__eventloop_8c_a22e1808ae5381c736fb81ab04a0b44f3_icgraph">
<area shape="rect" id="node3" href="tp_8c.html#afcb5edca8881b0c26ccbc120775ed38b" title="the main event loop." alt="" coords="119,5,201,37"/></map>
</div>
</p>

</div>
</div>
<a class="anchor" id="a5112d1e28056ffe613e005caf9066db3"></a><!-- doxytag: member="ctrl_eventloop.c::ctrl_req_action_handler" ref="a5112d1e28056ffe613e005caf9066db3" args="(upk_conn_handle_meta_t *clients, upk_payload_t *msg)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void ctrl_req_action_handler </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="structupk__conn__handle__meta__p.html">upk_conn_handle_meta_t</a> *&#160;</td>
          <td class="paramname"><em>clients</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="struct__upk__payload.html">upk_payload_t</a> *&#160;</td>
          <td class="paramname"><em>msg</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Handler to call when an action request is received from a client, signature is of upk_net_callback_t,. </p>
<p>***************************************************************************************************************** </p>
<dl><dt><b>Parameters:</b></dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">clients</td><td>The llist of handles, and clients-&gt;thisp is the current handle. </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">msg</td><td>The action request message. </td></tr>
  </table>
  </dd>
</dl>

<p>References <a class="el" href="structupk__req__action__t.html#aadf21e3c57d56c869006a9ba6ff9ce2b">upk_req_action_t::action</a>, <a class="el" href="struct__upk__svc__desc.html#a7a769827b6422551922ac2f8e5e61564">_upk_svc_desc::Name</a>, <a class="el" href="struct__upk__payload.html#a22f7f03c4df6792a307fe00cd8a72dbb">_upk_payload::payload</a>, <a class="el" href="controller_8h.html#a732e458dbb31507c5d6e25fe8051c526">reload_buddy_svc()</a>, <a class="el" href="union__upk__payload__types.html#abc1bf3b102d683a0f031588df6bc97db">_upk_payload_types::req_action</a>, <a class="el" href="controller_8h.html#abac768e7b1b76398ad7e25e651f776ea">start_buddy_svc()</a>, <a class="el" href="controller_8h.html#af36be3e8ca1253b0d412f404dcde2629">stop_buddy_svc()</a>, <a class="el" href="structupk__req__action__t.html#a15dfa4fee4f209e9229e79fc434989eb">upk_req_action_t::svc_id</a>, <a class="el" href="struct__upk__controller__config.html#a57ba77b4bf24c5b27d41fe1f2d5fbea3">_upk_controller_config::svclist</a>, <a class="el" href="structupk__svc__desc__meta__p.html#a1b5765fbff27a4313dea5b940b546c89">upk_svc_desc_meta_p::thisp</a>, <a class="el" href="structupk__conn__handle__meta__p.html#a90587c4a77c136bf2f282963efa6eb02">upk_conn_handle_meta_p::thisp</a>, <a class="el" href="controller_2tp_8c.html#a9bb3a8bef56da031c13cdd2099224313">upk_create_repl_result()</a>, <a class="el" href="group__upk__errors.html#ga13c310d9d7c7ebe0eca8b4a6690af032">upk_debug1</a>, <a class="el" href="upk__types_8h.html#a7ab2c8ba7f13eac616288982bad10402">UPK_MAX_STRING_LEN</a>, <a class="el" href="group__upk__network.html#gab7efe972a36f4f23cb9b811892cf142c">upk_pkt_free()</a>, <a class="el" href="group__upk__network.html#ga995978d17c5c389c2acd4175264bcfc9">upk_queue_packet()</a>, <a class="el" href="group__config__impl.html#gaf7638ba77297c6ad954805d92fa33c13">upk_runtime_configuration</a>, and <a class="el" href="upk__types_8h.html#a0bcdc372d091c6f6e48c99bebd75269f">UPKLIST_FOREACH</a>.</p>

<p>Referenced by <a class="el" href="ctrl__eventloop_8c.html#a17b8185080472699e32223cdf67f28e0">init_callback_handlers()</a>.</p>

<p><div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="ctrl__eventloop_8c_a5112d1e28056ffe613e005caf9066db3_cgraph.png" border="0" usemap="#ctrl__eventloop_8c_a5112d1e28056ffe613e005caf9066db3_cgraph" alt=""/></div>
<map name="ctrl__eventloop_8c_a5112d1e28056ffe613e005caf9066db3_cgraph" id="ctrl__eventloop_8c_a5112d1e28056ffe613e005caf9066db3_cgraph">
<area shape="rect" id="node3" href="controller_8h.html#a732e458dbb31507c5d6e25fe8051c526" title="reload_buddy_svc" alt="" coords="224,5,349,37"/><area shape="rect" id="node5" href="controller_8h.html#abac768e7b1b76398ad7e25e651f776ea" title="start_buddy_svc" alt="" coords="228,61,345,93"/><area shape="rect" id="node7" href="controller_8h.html#af36be3e8ca1253b0d412f404dcde2629" title="stop_buddy_svc" alt="" coords="229,117,344,149"/><area shape="rect" id="node9" href="controller_2tp_8c.html#a9bb3a8bef56da031c13cdd2099224313" title="upk_create_repl_result" alt="" coords="211,173,363,205"/><area shape="rect" id="node11" href="group__upk__network.html#gab7efe972a36f4f23cb9b811892cf142c" title="upk_pkt_free" alt="" coords="239,229,335,261"/><area shape="rect" id="node13" href="group__upk__network.html#ga995978d17c5c389c2acd4175264bcfc9" title="enqueue a packet for sending" alt="" coords="221,285,352,317"/></map>
</div>
</p>

<p><div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="ctrl__eventloop_8c_a5112d1e28056ffe613e005caf9066db3_icgraph.png" border="0" usemap="#ctrl__eventloop_8c_a5112d1e28056ffe613e005caf9066db3_icgraph" alt=""/></div>
<map name="ctrl__eventloop_8c_a5112d1e28056ffe613e005caf9066db3_icgraph" id="ctrl__eventloop_8c_a5112d1e28056ffe613e005caf9066db3_icgraph">
<area shape="rect" id="node3" href="ctrl__eventloop_8c.html#a17b8185080472699e32223cdf67f28e0" title="setup initial callback handlers" alt="" coords="211,5,360,37"/><area shape="rect" id="node5" href="ctrl__eventloop_8c.html#a22e1808ae5381c736fb81ab04a0b44f3" title="initialization before eventloop" alt="" coords="408,5,472,37"/><area shape="rect" id="node7" href="tp_8c.html#afcb5edca8881b0c26ccbc120775ed38b" title="the main event loop." alt="" coords="521,5,604,37"/></map>
</div>
</p>

</div>
</div>
<a class="anchor" id="a4f1536d3d1e98d423cf2127594f407e8"></a><!-- doxytag: member="ctrl_eventloop.c::ctrl_req_disconnect_handler" ref="a4f1536d3d1e98d423cf2127594f407e8" args="(upk_conn_handle_meta_t *clients, upk_payload_t *msg)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void ctrl_req_disconnect_handler </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="structupk__conn__handle__meta__p.html">upk_conn_handle_meta_t</a> *&#160;</td>
          <td class="paramname"><em>clients</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="struct__upk__payload.html">upk_payload_t</a> *&#160;</td>
          <td class="paramname"><em>msg</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Handler to call when an disconnect request is received from a client, signature is of upk_net_callback_t,. </p>
<p>***************************************************************************************************************** </p>
<dl><dt><b>Parameters:</b></dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">clients</td><td>The llist of handles, and clients-&gt;thisp is the current handle. </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">msg</td><td>The disconnect request message. </td></tr>
  </table>
  </dd>
</dl>

<p>References <a class="el" href="struct__upk__conn__handle.html#a24a3e21f391126c62c16ab056e901fd6">_upk_conn_handle::cl_name</a>, <a class="el" href="structupk__conn__handle__meta__p.html#a90587c4a77c136bf2f282963efa6eb02">upk_conn_handle_meta_p::thisp</a>, <a class="el" href="group__upk__network.html#gae0326e499d4821a8e2c5b0d52a456155">upk_create_req_disconnect()</a>, <a class="el" href="group__upk__errors.html#ga13c310d9d7c7ebe0eca8b4a6690af032">upk_debug1</a>, <a class="el" href="group__upk__network.html#ga85c0c3d99b75f2d2b40a41ca4b3c1b9c">upk_net_shutdown_callback()</a>, <a class="el" href="group__upk__network.html#gab7efe972a36f4f23cb9b811892cf142c">upk_pkt_free()</a>, and <a class="el" href="group__upk__network.html#ga995978d17c5c389c2acd4175264bcfc9">upk_queue_packet()</a>.</p>

<p>Referenced by <a class="el" href="ctrl__eventloop_8c.html#a17b8185080472699e32223cdf67f28e0">init_callback_handlers()</a>.</p>

<p><div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="ctrl__eventloop_8c_a4f1536d3d1e98d423cf2127594f407e8_cgraph.png" border="0" usemap="#ctrl__eventloop_8c_a4f1536d3d1e98d423cf2127594f407e8_cgraph" alt=""/></div>
<map name="ctrl__eventloop_8c_a4f1536d3d1e98d423cf2127594f407e8_cgraph" id="ctrl__eventloop_8c_a4f1536d3d1e98d423cf2127594f407e8_cgraph">
<area shape="rect" id="node3" href="group__upk__network.html#gae0326e499d4821a8e2c5b0d52a456155" title="upk_create_req_disconnect" alt="" coords="241,5,420,37"/><area shape="rect" id="node5" href="group__upk__network.html#ga85c0c3d99b75f2d2b40a41ca4b3c1b9c" title="wrapper around upk&#45;disconnect_handle for use as a callback." alt="" coords="239,61,423,93"/><area shape="rect" id="node7" href="group__upk__network.html#gab7efe972a36f4f23cb9b811892cf142c" title="upk_pkt_free" alt="" coords="283,117,379,149"/><area shape="rect" id="node9" href="group__upk__network.html#ga995978d17c5c389c2acd4175264bcfc9" title="enqueue a packet for sending" alt="" coords="265,173,396,205"/></map>
</div>
</p>

<p><div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="ctrl__eventloop_8c_a4f1536d3d1e98d423cf2127594f407e8_icgraph.png" border="0" usemap="#ctrl__eventloop_8c_a4f1536d3d1e98d423cf2127594f407e8_icgraph" alt=""/></div>
<map name="ctrl__eventloop_8c_a4f1536d3d1e98d423cf2127594f407e8_icgraph" id="ctrl__eventloop_8c_a4f1536d3d1e98d423cf2127594f407e8_icgraph">
<area shape="rect" id="node3" href="ctrl__eventloop_8c.html#a17b8185080472699e32223cdf67f28e0" title="setup initial callback handlers" alt="" coords="237,5,387,37"/><area shape="rect" id="node5" href="ctrl__eventloop_8c.html#a22e1808ae5381c736fb81ab04a0b44f3" title="initialization before eventloop" alt="" coords="435,5,499,37"/><area shape="rect" id="node7" href="tp_8c.html#afcb5edca8881b0c26ccbc120775ed38b" title="the main event loop." alt="" coords="548,5,631,37"/></map>
</div>
</p>

</div>
</div>
<a class="anchor" id="abe67c79dacfd5a3938a3eea359bbc293"></a><!-- doxytag: member="ctrl_eventloop.c::ctrl_req_preamble_handler" ref="abe67c79dacfd5a3938a3eea359bbc293" args="(upk_conn_handle_meta_t *clients, upk_payload_t *msg)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void ctrl_req_preamble_handler </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="structupk__conn__handle__meta__p.html">upk_conn_handle_meta_t</a> *&#160;</td>
          <td class="paramname"><em>clients</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="struct__upk__payload.html">upk_payload_t</a> *&#160;</td>
          <td class="paramname"><em>msg</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Handler to call when an preamble request is received from a client, signature is of upk_net_callback_t,. </p>
<p>***************************************************************************************************************** </p>
<dl><dt><b>Parameters:</b></dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">clients</td><td>The llist of handles, and clients-&gt;thisp is the current handle. </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">msg</td><td>The preamble request message. </td></tr>
  </table>
  </dd>
</dl>

<p>References <a class="el" href="struct__upk__conn__handle.html#a24a3e21f391126c62c16ab056e901fd6">_upk_conn_handle::cl_name</a>, <a class="el" href="structupk__req__preamble__t.html#adf95ad7581a49d120d294ab8d04524ef">upk_req_preamble_t::client_name</a>, <a class="el" href="structupk__req__preamble__t.html#a229ac56dffaffc07213d4f63d1fc4540">upk_req_preamble_t::max_supported_ver</a>, <a class="el" href="structupk__req__preamble__t.html#a47fb19db9df40e58c4ee3f7027edfdf6">upk_req_preamble_t::min_supported_ver</a>, <a class="el" href="structupk__packet__t.html#a37753733200c7b887d8616f7528e15a6">upk_packet_t::payload</a>, <a class="el" href="struct__upk__payload.html#a22f7f03c4df6792a307fe00cd8a72dbb">_upk_payload::payload</a>, <a class="el" href="union__upk__payload__types.html#a238d495cdbd50f355dd2222ef55f3dcb">_upk_payload_types::req_preamble</a>, <a class="el" href="structupk__conn__handle__meta__p.html#a90587c4a77c136bf2f282963efa6eb02">upk_conn_handle_meta_p::thisp</a>, <a class="el" href="group__upk__network.html#ga8783766294f8c67dd8390b90f26f046e">upk_create_repl_preamble()</a>, <a class="el" href="group__upk__errors.html#ga13c310d9d7c7ebe0eca8b4a6690af032">upk_debug1</a>, <a class="el" href="upk__types_8h.html#a7ab2c8ba7f13eac616288982bad10402">UPK_MAX_STRING_LEN</a>, <a class="el" href="group__client__protocol.html#ga845e1f4da3372f878635c308b1465f0f">UPK_MAX_SUPPORTED_PROTO</a>, <a class="el" href="group__client__protocol.html#gafebb05a5b0ab9fe4f6ec8ba2fc7001fb">UPK_MIN_SUPPORTED_PROTO</a>, <a class="el" href="group__upk__network.html#gab7efe972a36f4f23cb9b811892cf142c">upk_pkt_free()</a>, and <a class="el" href="group__upk__network.html#ga995978d17c5c389c2acd4175264bcfc9">upk_queue_packet()</a>.</p>

<p>Referenced by <a class="el" href="ctrl__eventloop_8c.html#a17b8185080472699e32223cdf67f28e0">init_callback_handlers()</a>.</p>

<p><div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="ctrl__eventloop_8c_abe67c79dacfd5a3938a3eea359bbc293_cgraph.png" border="0" usemap="#ctrl__eventloop_8c_abe67c79dacfd5a3938a3eea359bbc293_cgraph" alt=""/></div>
<map name="ctrl__eventloop_8c_abe67c79dacfd5a3938a3eea359bbc293_cgraph" id="ctrl__eventloop_8c_abe67c79dacfd5a3938a3eea359bbc293_cgraph">
<area shape="rect" id="node3" href="group__upk__network.html#ga8783766294f8c67dd8390b90f26f046e" title="upk_create_repl_preamble" alt="" coords="227,5,400,37"/><area shape="rect" id="node5" href="group__upk__network.html#gab7efe972a36f4f23cb9b811892cf142c" title="upk_pkt_free" alt="" coords="265,61,361,93"/><area shape="rect" id="node7" href="group__upk__network.html#ga995978d17c5c389c2acd4175264bcfc9" title="enqueue a packet for sending" alt="" coords="248,117,379,149"/></map>
</div>
</p>

<p><div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="ctrl__eventloop_8c_abe67c79dacfd5a3938a3eea359bbc293_icgraph.png" border="0" usemap="#ctrl__eventloop_8c_abe67c79dacfd5a3938a3eea359bbc293_icgraph" alt=""/></div>
<map name="ctrl__eventloop_8c_abe67c79dacfd5a3938a3eea359bbc293_icgraph" id="ctrl__eventloop_8c_abe67c79dacfd5a3938a3eea359bbc293_icgraph">
<area shape="rect" id="node3" href="ctrl__eventloop_8c.html#a17b8185080472699e32223cdf67f28e0" title="setup initial callback handlers" alt="" coords="227,5,376,37"/><area shape="rect" id="node5" href="ctrl__eventloop_8c.html#a22e1808ae5381c736fb81ab04a0b44f3" title="initialization before eventloop" alt="" coords="424,5,488,37"/><area shape="rect" id="node7" href="tp_8c.html#afcb5edca8881b0c26ccbc120775ed38b" title="the main event loop." alt="" coords="537,5,620,37"/></map>
</div>
</p>

</div>
</div>
<a class="anchor" id="a7dd0909c839d869fe05e1cf8d4af19e2"></a><!-- doxytag: member="ctrl_eventloop.c::ctrl_setup_sighandlers" ref="a7dd0909c839d869fe05e1cf8d4af19e2" args="(void)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">static void ctrl_setup_sighandlers </td>
          <td>(</td>
          <td class="paramtype">void&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td><code> [inline, static]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>setup signal handlers </p>
<p>***************************************************************************************************************** </p>

<p>References <a class="el" href="structsigaction.html#aea0dabe7a03641c8b426521f4406b425">sigaction::sa_flags</a>, <a class="el" href="structsigaction.html#a758a699ea5845e043e3ff61df1b59de8">sigaction::sa_handler</a>, <a class="el" href="structsigaction.html#aeecd65682885b6da3cd8b24ebb9a7e4b">sigaction::sa_mask</a>, <a class="el" href="ctrl__eventloop_8c.html#a39174bf64f8dd75ed3e494b33e2f3b12">sa_sigaction_func()</a>, <a class="el" href="controller_2tp_8c.html#a740db5cb700ac655b93536abe01082d6">sigaction()</a>, <a class="el" href="controller_2tp_8c.html#a57087bdf7ca8b526bb80dbe390ccf297">sigemptyset()</a>, <a class="el" href="controller_2tp_8c.html#a6c3013276048e468267eca29fdd44d0a">sigfillset()</a>, and <a class="el" href="group__upk__errors.html#gab9c146049fed5ed1b55496ee9dd5136b">upk_fatal</a>.</p>

<p>Referenced by <a class="el" href="ctrl__eventloop_8c.html#a22e1808ae5381c736fb81ab04a0b44f3">ctrl_init()</a>.</p>

<p><div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="ctrl__eventloop_8c_a7dd0909c839d869fe05e1cf8d4af19e2_cgraph.png" border="0" usemap="#ctrl__eventloop_8c_a7dd0909c839d869fe05e1cf8d4af19e2_cgraph" alt=""/></div>
<map name="ctrl__eventloop_8c_a7dd0909c839d869fe05e1cf8d4af19e2_cgraph" id="ctrl__eventloop_8c_a7dd0909c839d869fe05e1cf8d4af19e2_cgraph">
<area shape="rect" id="node3" href="ctrl__eventloop_8c.html#a39174bf64f8dd75ed3e494b33e2f3b12" title="place received signals into a queue to handle later." alt="" coords="207,5,332,37"/><area shape="rect" id="node5" href="controller_2tp_8c.html#a740db5cb700ac655b93536abe01082d6" title="sigaction" alt="" coords="233,61,305,93"/><area shape="rect" id="node7" href="controller_2tp_8c.html#a57087bdf7ca8b526bb80dbe390ccf297" title="sigemptyset" alt="" coords="224,117,315,149"/><area shape="rect" id="node9" href="controller_2tp_8c.html#a6c3013276048e468267eca29fdd44d0a" title="sigfillset" alt="" coords="235,173,304,205"/></map>
</div>
</p>

<p><div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="ctrl__eventloop_8c_a7dd0909c839d869fe05e1cf8d4af19e2_icgraph.png" border="0" usemap="#ctrl__eventloop_8c_a7dd0909c839d869fe05e1cf8d4af19e2_icgraph" alt=""/></div>
<map name="ctrl__eventloop_8c_a7dd0909c839d869fe05e1cf8d4af19e2_icgraph" id="ctrl__eventloop_8c_a7dd0909c839d869fe05e1cf8d4af19e2_icgraph">
<area shape="rect" id="node3" href="ctrl__eventloop_8c.html#a22e1808ae5381c736fb81ab04a0b44f3" title="initialization before eventloop" alt="" coords="205,5,269,37"/><area shape="rect" id="node5" href="tp_8c.html#afcb5edca8881b0c26ccbc120775ed38b" title="the main event loop." alt="" coords="319,5,401,37"/></map>
</div>
</p>

</div>
</div>
<a class="anchor" id="ad055a2a21d52bb93290db5ecee7b62b5"></a><!-- doxytag: member="ctrl_eventloop.c::ctrl_sock_setup" ref="ad055a2a21d52bb93290db5ecee7b62b5" args="(void)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int32_t ctrl_sock_setup </td>
          <td>(</td>
          <td class="paramtype">void&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>setup controller's socket </p>
<p>***************************************************************************************************************** </p>

<p>References <a class="el" href="controller_2tp_8c.html#a7933b5c54b5dec453b9c464a7d6977a8">bind()</a>, <a class="el" href="struct__upk__controller__config.html#ae66e6cd298ca71d88bfedd0d565de3f0">_upk_controller_config::controller_socket</a>, <a class="el" href="controller_2tp_8c.html#a616d7b5de1ec94f50883523f1eb110c0">fcntl()</a>, <a class="el" href="group__upk__errors.html#ga4508c0711c4f98ebbef1ab10d8cb4bc5">IF_UPK_ERROR</a>, <a class="el" href="controller_2tp_8c.html#a55aa626d1a64b93763649f7b151de079">listen()</a>, <a class="el" href="controller_2tp_8c.html#a832a2ee6ed10d8da825fc3a6e32db0fdae3b7fb9487113a31d403b23aaeaad424">SOCK_STREAM</a>, <a class="el" href="controller_2tp_8c.html#a303c844f499a13fc0bf5338fc3194bfc">socket()</a>, <a class="el" href="structsockaddr__un.html#a129696980f9f8823979bb3e5e7e3c85a">sockaddr_un::sun_family</a>, <a class="el" href="structsockaddr__un.html#a342822ce201ec8af97fb53fe7f8afe00">sockaddr_un::sun_path</a>, <a class="el" href="group__upk__errors.html#gab40957c9fa173393a490b924f97ea17e">UPK_FUNC_ASSERT</a>, <a class="el" href="group__upk__errors.html#ga691ea7a49d632dc0d129e6c80cb1e817">UPK_FUNC_ASSERT_MSG</a>, <a class="el" href="group__config__impl.html#gaf7638ba77297c6ad954805d92fa33c13">upk_runtime_configuration</a>, and <a class="el" href="group__upk__errors.html#ga0abba5d980180c5f12823c366a12020aa8aa6de73b0042e07d3793da091cab2c9">UPK_SOCKET_FAILURE</a>.</p>

<p>Referenced by <a class="el" href="controller__main_8c.html#a647f21a28344e1d9c643f4115516d7c9">main()</a>.</p>

<p><div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="ctrl__eventloop_8c_ad055a2a21d52bb93290db5ecee7b62b5_cgraph.png" border="0" usemap="#ctrl__eventloop_8c_ad055a2a21d52bb93290db5ecee7b62b5_cgraph" alt=""/></div>
<map name="ctrl__eventloop_8c_ad055a2a21d52bb93290db5ecee7b62b5_cgraph" id="ctrl__eventloop_8c_ad055a2a21d52bb93290db5ecee7b62b5_cgraph">
<area shape="rect" id="node3" href="controller_2tp_8c.html#a7933b5c54b5dec453b9c464a7d6977a8" title="bind" alt="" coords="176,5,221,37"/><area shape="rect" id="node5" href="controller_2tp_8c.html#a616d7b5de1ec94f50883523f1eb110c0" title="fcntl" alt="" coords="176,61,221,93"/><area shape="rect" id="node7" href="controller_2tp_8c.html#a55aa626d1a64b93763649f7b151de079" title="listen" alt="" coords="173,117,224,149"/><area shape="rect" id="node9" href="controller_2tp_8c.html#a303c844f499a13fc0bf5338fc3194bfc" title="socket" alt="" coords="169,173,228,205"/></map>
</div>
</p>

<p><div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="ctrl__eventloop_8c_ad055a2a21d52bb93290db5ecee7b62b5_icgraph.png" border="0" usemap="#ctrl__eventloop_8c_ad055a2a21d52bb93290db5ecee7b62b5_icgraph" alt=""/></div>
<map name="ctrl__eventloop_8c_ad055a2a21d52bb93290db5ecee7b62b5_icgraph" id="ctrl__eventloop_8c_ad055a2a21d52bb93290db5ecee7b62b5_icgraph">
<area shape="rect" id="node3" href="controller__main_8c.html#a647f21a28344e1d9c643f4115516d7c9" title="main" alt="" coords="169,5,217,37"/></map>
</div>
</p>

</div>
</div>
<a class="anchor" id="afcb5edca8881b0c26ccbc120775ed38b"></a><!-- doxytag: member="ctrl_eventloop.c::event_loop" ref="afcb5edca8881b0c26ccbc120775ed38b" args="(int32_t listen_sock)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void event_loop </td>
          <td>(</td>
          <td class="paramtype">int32_t&#160;</td>
          <td class="paramname"><em>listen_sock</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>the main event loop. </p>
<p>***************************************************************************************************************** This will handle signals, poll buddies, poll clients, publish events, and cleanup sockets. </p>

<p>References <a class="el" href="struct__upk__controller__config.html#ae7689d54900beb4a7a07839bca6e044e">_upk_controller_config::BuddyPollingInterval</a>, <a class="el" href="ctrl__eventloop_8c.html#a8b37090bbf8a037f548ce443b49a064a">ctrl_accept_conn()</a>, <a class="el" href="ctrl__eventloop_8c.html#a22e1808ae5381c736fb81ab04a0b44f3">ctrl_init()</a>, <a class="el" href="controller_8h.html#a1e00be01f0ecc2a3b84e03bae75e9bd8">handle_buddies()</a>, <a class="el" href="controller_8h.html#ad90d54275c3f302332ac0724037f3371">handle_signals()</a>, <a class="el" href="controller_2tp_8c.html#aaa1d7841e84120566afb01114444543f">select()</a>, <a class="el" href="group__upk__errors.html#ga13c310d9d7c7ebe0eca8b4a6690af032">upk_debug1</a>, <a class="el" href="group__upk__network.html#ga3c04f64fc1df46b5b3117987b09980e0">upk_net_event_dispatcher()</a>, <a class="el" href="group__upk__network.html#ga3a4576d931cba244e55bdc407b9bbcb1">upk_net_flush_closed_sockets()</a>, and <a class="el" href="group__config__impl.html#gaf7638ba77297c6ad954805d92fa33c13">upk_runtime_configuration</a>.</p>

<p>Referenced by <a class="el" href="controller__main_8c.html#a647f21a28344e1d9c643f4115516d7c9">main()</a>.</p>

<p><div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="ctrl__eventloop_8c_afcb5edca8881b0c26ccbc120775ed38b_cgraph.png" border="0" usemap="#ctrl__eventloop_8c_afcb5edca8881b0c26ccbc120775ed38b_cgraph" alt=""/></div>
<map name="ctrl__eventloop_8c_afcb5edca8881b0c26ccbc120775ed38b_cgraph" id="ctrl__eventloop_8c_afcb5edca8881b0c26ccbc120775ed38b_cgraph">
<area shape="rect" id="node3" href="ctrl__eventloop_8c.html#a8b37090bbf8a037f548ce443b49a064a" title="accept() and setup a handle for an incomming connection." alt="" coords="179,61,299,93"/><area shape="rect" id="node9" href="ctrl__eventloop_8c.html#a22e1808ae5381c736fb81ab04a0b44f3" title="initialization before eventloop" alt="" coords="207,201,271,233"/><area shape="rect" id="node59" href="controller_8h.html#a1e00be01f0ecc2a3b84e03bae75e9bd8" title="handle_buddies" alt="" coords="183,257,295,289"/><area shape="rect" id="node61" href="controller_8h.html#ad90d54275c3f302332ac0724037f3371" title="deal with signals pending action in signal_queue." alt="" coords="185,313,292,345"/><area shape="rect" id="node63" href="controller_2tp_8c.html#aaa1d7841e84120566afb01114444543f" title="select" alt="" coords="211,369,267,401"/><area shape="rect" id="node65" href="group__upk__network.html#ga3c04f64fc1df46b5b3117987b09980e0" title="The event dispatcher, called via an event&#45;loop." alt="" coords="152,425,325,457"/><area shape="rect" id="node67" href="group__upk__network.html#ga3a4576d931cba244e55bdc407b9bbcb1" title="iterate through the list of handles, and prune any that are no longer valid." alt="" coords="139,481,339,513"/><area shape="rect" id="node5" href="controller_2tp_8c.html#a27d7dff6f11f268fb5bdad349a32a548" title="accept" alt="" coords="451,61,509,93"/><area shape="rect" id="node7" href="group__upk__network.html#gabcfe587ed0836f5c3bd320f460e04b0a" title="add a new socket handle to the handles list" alt="" coords="387,5,573,37"/><area shape="rect" id="node11" href="controller_2tp_8c.html#a697ee1f5faa14a79182911f6b504aaf1" title="calloc" alt="" coords="452,173,508,205"/><area shape="rect" id="node13" href="ctrl__eventloop_8c.html#ae150e0430351943d2feb1798ce483d10" title="cleanup allocated structures at exit; makes valgrind happy, so I can find more signicant issues..." alt="" coords="420,229,540,261"/><area shape="rect" id="node15" href="ctrl__eventloop_8c.html#a7dd0909c839d869fe05e1cf8d4af19e2" title="setup signal handlers" alt="" coords="404,285,556,317"/><area shape="rect" id="node25" href="ctrl__eventloop_8c.html#a17b8185080472699e32223cdf67f28e0" title="setup initial callback handlers" alt="" coords="405,453,555,485"/><area shape="rect" id="node57" href="group__upk__network.html#gad7911c4e22d988a43a3a0e243a94f15a" title="initialize connection handles" alt="" coords="391,117,569,149"/><area shape="rect" id="node17" href="ctrl__eventloop_8c.html#a39174bf64f8dd75ed3e494b33e2f3b12" title="place received signals into a queue to handle later." alt="" coords="651,173,776,205"/><area shape="rect" id="node19" href="controller_2tp_8c.html#a740db5cb700ac655b93536abe01082d6" title="sigaction" alt="" coords="677,229,749,261"/><area shape="rect" id="node21" href="controller_2tp_8c.html#a57087bdf7ca8b526bb80dbe390ccf297" title="sigemptyset" alt="" coords="668,285,759,317"/><area shape="rect" id="node23" href="controller_2tp_8c.html#a6c3013276048e468267eca29fdd44d0a" title="sigfillset" alt="" coords="679,341,748,373"/><area shape="rect" id="node27" href="ctrl__eventloop_8c.html#a5112d1e28056ffe613e005caf9066db3" title="Handler to call when an action request is received from a client, signature is of upk_net_callback_t..." alt="" coords="636,397,791,429"/><area shape="rect" id="node41" href="ctrl__eventloop_8c.html#a4f1536d3d1e98d423cf2127594f407e8" title="Handler to call when an disconnect request is received from a client, signature is of upk_net_callbac..." alt="" coords="621,509,805,541"/><area shape="rect" id="node49" href="ctrl__eventloop_8c.html#abe67c79dacfd5a3938a3eea359bbc293" title="Handler to call when an preamble request is received from a client, signature is of upk_net_callback_..." alt="" coords="627,453,800,485"/><area shape="rect" id="node55" href="group__upk__network.html#gab68ed7f2471a6e482a2ebbaa0a3b1ec2" title="extract the nested global_state component from the generic (void *) userdata element" alt="" coords="629,565,797,597"/><area shape="rect" id="node29" href="controller_8h.html#a732e458dbb31507c5d6e25fe8051c526" title="reload_buddy_svc" alt="" coords="884,397,1009,429"/><area shape="rect" id="node31" href="controller_8h.html#abac768e7b1b76398ad7e25e651f776ea" title="start_buddy_svc" alt="" coords="888,229,1005,261"/><area shape="rect" id="node33" href="controller_8h.html#af36be3e8ca1253b0d412f404dcde2629" title="stop_buddy_svc" alt="" coords="889,285,1004,317"/><area shape="rect" id="node35" href="controller_2tp_8c.html#a9bb3a8bef56da031c13cdd2099224313" title="upk_create_repl_result" alt="" coords="871,341,1023,373"/><area shape="rect" id="node37" href="group__upk__network.html#gab7efe972a36f4f23cb9b811892cf142c" title="upk_pkt_free" alt="" coords="899,453,995,485"/><area shape="rect" id="node39" href="group__upk__network.html#ga995978d17c5c389c2acd4175264bcfc9" title="enqueue a packet for sending" alt="" coords="881,509,1012,541"/><area shape="rect" id="node43" href="group__upk__network.html#gae0326e499d4821a8e2c5b0d52a456155" title="upk_create_req_disconnect" alt="" coords="857,677,1036,709"/><area shape="rect" id="node45" href="group__upk__network.html#ga85c0c3d99b75f2d2b40a41ca4b3c1b9c" title="wrapper around upk&#45;disconnect_handle for use as a callback." alt="" coords="855,621,1039,653"/><area shape="rect" id="node51" href="group__upk__network.html#ga8783766294f8c67dd8390b90f26f046e" title="upk_create_repl_preamble" alt="" coords="860,565,1033,597"/></map>
</div>
</p>

<p><div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="ctrl__eventloop_8c_afcb5edca8881b0c26ccbc120775ed38b_icgraph.png" border="0" usemap="#ctrl__eventloop_8c_afcb5edca8881b0c26ccbc120775ed38b_icgraph" alt=""/></div>
<map name="ctrl__eventloop_8c_afcb5edca8881b0c26ccbc120775ed38b_icgraph" id="ctrl__eventloop_8c_afcb5edca8881b0c26ccbc120775ed38b_icgraph">
<area shape="rect" id="node3" href="controller__main_8c.html#a647f21a28344e1d9c643f4115516d7c9" title="main" alt="" coords="140,5,188,37"/></map>
</div>
</p>

</div>
</div>
<a class="anchor" id="ad90d54275c3f302332ac0724037f3371"></a><!-- doxytag: member="ctrl_eventloop.c::handle_signals" ref="ad90d54275c3f302332ac0724037f3371" args="(void)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void handle_signals </td>
          <td>(</td>
          <td class="paramtype">void&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>deal with signals pending action in signal_queue. </p>
<p>***************************************************************************************************************** Block all signals during copy to avoid annoying race conditions. </p>

<p>References <a class="el" href="structctrl__sigqueue__meta__p.html#a3eda9f22af5575734a15167955148417">ctrl_sigqueue_meta_p::count</a>, <a class="el" href="structsiginfo.html#af4ef052b7a69fd37b17eda536bd0a161">siginfo::si_pid</a>, <a class="el" href="controller_2tp_8c.html#a6c3013276048e468267eca29fdd44d0a">sigfillset()</a>, <a class="el" href="struct__ctrl__sigqueue.html#a9fdfd4fe7c65efd1731d67d7101e7fd5">_ctrl_sigqueue::siginfo</a>, <a class="el" href="struct__ctrl__sigqueue.html#afd350497c82cb6ff89c729fec571a01f">_ctrl_sigqueue::signal</a>, <a class="el" href="controller_2tp_8c.html#aa68905c2cae64c0ea01fca0c584dfa35">sigprocmask()</a>, <a class="el" href="controller_2tp_8c.html#a40f9508dc08bc459c1773c72094987d6">sigset()</a>, <a class="el" href="structctrl__sigqueue__meta__p.html#a54a1ff68fa07af43680ff652523c19b1">ctrl_sigqueue_meta_p::thisp</a>, <a class="el" href="upk__types_8h.html#af9b0cc29cac0ff597d63e3dd33728bbe">UPKLIST_HEAD</a>, <a class="el" href="upk__types_8h.html#a93969ddd44492f876ab93f85e607c4c8">UPKLIST_UNLINK</a>, and <a class="el" href="controller_2tp_8c.html#aa35dbece97881ee00888a5f99e3c8e65">waitpid()</a>.</p>

<p>Referenced by <a class="el" href="tp_8c.html#afcb5edca8881b0c26ccbc120775ed38b">event_loop()</a>.</p>

<p><div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="ctrl__eventloop_8c_ad90d54275c3f302332ac0724037f3371_cgraph.png" border="0" usemap="#ctrl__eventloop_8c_ad90d54275c3f302332ac0724037f3371_cgraph" alt=""/></div>
<map name="ctrl__eventloop_8c_ad90d54275c3f302332ac0724037f3371_cgraph" id="ctrl__eventloop_8c_ad90d54275c3f302332ac0724037f3371_cgraph">
<area shape="rect" id="node3" href="controller_2tp_8c.html#a6c3013276048e468267eca29fdd44d0a" title="sigfillset" alt="" coords="176,5,245,37"/><area shape="rect" id="node5" href="controller_2tp_8c.html#aa68905c2cae64c0ea01fca0c584dfa35" title="sigprocmask" alt="" coords="163,61,259,93"/><area shape="rect" id="node7" href="controller_2tp_8c.html#a40f9508dc08bc459c1773c72094987d6" title="sigset" alt="" coords="183,117,239,149"/><area shape="rect" id="node9" href="controller_2tp_8c.html#aa35dbece97881ee00888a5f99e3c8e65" title="waitpid" alt="" coords="180,173,241,205"/></map>
</div>
</p>

<p><div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="ctrl__eventloop_8c_ad90d54275c3f302332ac0724037f3371_icgraph.png" border="0" usemap="#ctrl__eventloop_8c_ad90d54275c3f302332ac0724037f3371_icgraph" alt=""/></div>
<map name="ctrl__eventloop_8c_ad90d54275c3f302332ac0724037f3371_icgraph" id="ctrl__eventloop_8c_ad90d54275c3f302332ac0724037f3371_icgraph">
<area shape="rect" id="node3" href="tp_8c.html#afcb5edca8881b0c26ccbc120775ed38b" title="the main event loop." alt="" coords="164,5,247,37"/></map>
</div>
</p>

</div>
</div>
<a class="anchor" id="a17b8185080472699e32223cdf67f28e0"></a><!-- doxytag: member="ctrl_eventloop.c::init_callback_handlers" ref="a17b8185080472699e32223cdf67f28e0" args="(upk_conn_handle_meta_t *clients)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">static void init_callback_handlers </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="structupk__conn__handle__meta__p.html">upk_conn_handle_meta_t</a> *&#160;</td>
          <td class="paramname"><em>clients</em></td><td>)</td>
          <td><code> [static]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>setup initial callback handlers </p>
<p>***************************************************************************************************************** </p>

<p>References <a class="el" href="struct__upk__net__state.html#ac33759fbf7a7b4cf6efbbe9ee169e590">_upk_net_state::callback_stack</a>, <a class="el" href="ctrl__eventloop_8c.html#a5112d1e28056ffe613e005caf9066db3">ctrl_req_action_handler()</a>, <a class="el" href="ctrl__eventloop_8c.html#a4f1536d3d1e98d423cf2127594f407e8">ctrl_req_disconnect_handler()</a>, <a class="el" href="ctrl__eventloop_8c.html#abe67c79dacfd5a3938a3eea359bbc293">ctrl_req_preamble_handler()</a>, <a class="el" href="structupk__net__cb__stk__meta__p.html#a464f856ae702f7b54b554ee02d95c007">upk_net_cb_stk_meta_p::head</a>, <a class="el" href="struct__upk__net__cb__stk.html#a65e029ac7932d87d41452383c60306c0">_upk_net_cb_stk::msg_handlers</a>, <a class="el" href="group__client__protocol.html#gad9b7e8c40ab66ea44d07826b155dc315">UPK_MSGTYPE_IDX</a>, <a class="el" href="group__upk__network.html#gab68ed7f2471a6e482a2ebbaa0a3b1ec2">upk_net_get_global_state()</a>, <a class="el" href="group__client__protocol.html#gab04f5fc5314f6296f0ef4b171d1b4282a9ac48dc153d5fa1d79280c078a1a5809">UPK_REQ_ACTION</a>, <a class="el" href="group__client__protocol.html#gab04f5fc5314f6296f0ef4b171d1b4282a0b4801fa26542f7fa70286275175ee07">UPK_REQ_DISCONNECT</a>, <a class="el" href="group__client__protocol.html#gab04f5fc5314f6296f0ef4b171d1b4282a96be342a0774c92adf59773972e0be0f">UPK_REQ_PREAMBLE</a>, and <a class="el" href="upk__types_8h.html#a5518a3cca969746b2fbda0f1b7bb3b95">UPKLIST_PREPEND</a>.</p>

<p>Referenced by <a class="el" href="ctrl__eventloop_8c.html#a22e1808ae5381c736fb81ab04a0b44f3">ctrl_init()</a>.</p>

<p><div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="ctrl__eventloop_8c_a17b8185080472699e32223cdf67f28e0_cgraph.png" border="0" usemap="#ctrl__eventloop_8c_a17b8185080472699e32223cdf67f28e0_cgraph" alt=""/></div>
<map name="ctrl__eventloop_8c_a17b8185080472699e32223cdf67f28e0_cgraph" id="ctrl__eventloop_8c_a17b8185080472699e32223cdf67f28e0_cgraph">
<area shape="rect" id="node3" href="ctrl__eventloop_8c.html#a5112d1e28056ffe613e005caf9066db3" title="Handler to call when an action request is received from a client, signature is of upk_net_callback_t..." alt="" coords="217,173,372,205"/><area shape="rect" id="node17" href="ctrl__eventloop_8c.html#a4f1536d3d1e98d423cf2127594f407e8" title="Handler to call when an disconnect request is received from a client, signature is of upk_net_callbac..." alt="" coords="203,313,387,345"/><area shape="rect" id="node25" href="ctrl__eventloop_8c.html#abe67c79dacfd5a3938a3eea359bbc293" title="Handler to call when an preamble request is received from a client, signature is of upk_net_callback_..." alt="" coords="208,257,381,289"/><area shape="rect" id="node31" href="group__upk__network.html#gab68ed7f2471a6e482a2ebbaa0a3b1ec2" title="extract the nested global_state component from the generic (void *) userdata element" alt="" coords="211,369,379,401"/><area shape="rect" id="node5" href="controller_8h.html#a732e458dbb31507c5d6e25fe8051c526" title="reload_buddy_svc" alt="" coords="465,173,591,205"/><area shape="rect" id="node7" href="controller_8h.html#abac768e7b1b76398ad7e25e651f776ea" title="start_buddy_svc" alt="" coords="469,5,587,37"/><area shape="rect" id="node9" href="controller_8h.html#af36be3e8ca1253b0d412f404dcde2629" title="stop_buddy_svc" alt="" coords="471,61,585,93"/><area shape="rect" id="node11" href="controller_2tp_8c.html#a9bb3a8bef56da031c13cdd2099224313" title="upk_create_repl_result" alt="" coords="452,117,604,149"/><area shape="rect" id="node13" href="group__upk__network.html#gab7efe972a36f4f23cb9b811892cf142c" title="upk_pkt_free" alt="" coords="480,229,576,261"/><area shape="rect" id="node15" href="group__upk__network.html#ga995978d17c5c389c2acd4175264bcfc9" title="enqueue a packet for sending" alt="" coords="463,285,593,317"/><area shape="rect" id="node19" href="group__upk__network.html#gae0326e499d4821a8e2c5b0d52a456155" title="upk_create_req_disconnect" alt="" coords="439,453,617,485"/><area shape="rect" id="node21" href="group__upk__network.html#ga85c0c3d99b75f2d2b40a41ca4b3c1b9c" title="wrapper around upk&#45;disconnect_handle for use as a callback." alt="" coords="436,397,620,429"/><area shape="rect" id="node27" href="group__upk__network.html#ga8783766294f8c67dd8390b90f26f046e" title="upk_create_repl_preamble" alt="" coords="441,341,615,373"/></map>
</div>
</p>

<p><div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="ctrl__eventloop_8c_a17b8185080472699e32223cdf67f28e0_icgraph.png" border="0" usemap="#ctrl__eventloop_8c_a17b8185080472699e32223cdf67f28e0_icgraph" alt=""/></div>
<map name="ctrl__eventloop_8c_a17b8185080472699e32223cdf67f28e0_icgraph" id="ctrl__eventloop_8c_a17b8185080472699e32223cdf67f28e0_icgraph">
<area shape="rect" id="node3" href="ctrl__eventloop_8c.html#a22e1808ae5381c736fb81ab04a0b44f3" title="initialization before eventloop" alt="" coords="203,5,267,37"/><area shape="rect" id="node5" href="tp_8c.html#afcb5edca8881b0c26ccbc120775ed38b" title="the main event loop." alt="" coords="316,5,399,37"/></map>
</div>
</p>

</div>
</div>
<a class="anchor" id="a39174bf64f8dd75ed3e494b33e2f3b12"></a><!-- doxytag: member="ctrl_eventloop.c::sa_sigaction_func" ref="a39174bf64f8dd75ed3e494b33e2f3b12" args="(int signal, siginfo_t *siginfo, void *ucontext)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void sa_sigaction_func </td>
          <td>(</td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>signal</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="structsiginfo.html">siginfo_t</a> *&#160;</td>
          <td class="paramname"><em>siginfo</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">void *&#160;</td>
          <td class="paramname"><em>ucontext</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>place received signals into a queue to handle later. </p>
<p>***************************************************************************************************************** Because most signal handling will have fairly significant work to do, all signal handling is done via queuing the receipt to the 'ctrl_signal_queue', and processing is deferred to the event loop; specifically the "handle_signals" function called first in the event loop. </p>

<p>References <a class="el" href="struct__ctrl__sigqueue.html#a9fdfd4fe7c65efd1731d67d7101e7fd5">_ctrl_sigqueue::siginfo</a>, <a class="el" href="struct__ctrl__sigqueue.html#afd350497c82cb6ff89c729fec571a01f">_ctrl_sigqueue::signal</a>, <a class="el" href="structctrl__sigqueue__meta__p.html#a54a1ff68fa07af43680ff652523c19b1">ctrl_sigqueue_meta_p::thisp</a>, and <a class="el" href="upk__types_8h.html#a762fa0bc37691b9f91920e80fa313c87">UPKLIST_APPEND</a>.</p>

<p>Referenced by <a class="el" href="ctrl__eventloop_8c.html#a7dd0909c839d869fe05e1cf8d4af19e2">ctrl_setup_sighandlers()</a>.</p>

<p><div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="ctrl__eventloop_8c_a39174bf64f8dd75ed3e494b33e2f3b12_icgraph.png" border="0" usemap="#ctrl__eventloop_8c_a39174bf64f8dd75ed3e494b33e2f3b12_icgraph" alt=""/></div>
<map name="ctrl__eventloop_8c_a39174bf64f8dd75ed3e494b33e2f3b12_icgraph" id="ctrl__eventloop_8c_a39174bf64f8dd75ed3e494b33e2f3b12_icgraph">
<area shape="rect" id="node3" href="ctrl__eventloop_8c.html#a7dd0909c839d869fe05e1cf8d4af19e2" title="setup signal handlers" alt="" coords="181,5,333,37"/><area shape="rect" id="node5" href="ctrl__eventloop_8c.html#a22e1808ae5381c736fb81ab04a0b44f3" title="initialization before eventloop" alt="" coords="381,5,445,37"/><area shape="rect" id="node7" href="tp_8c.html#afcb5edca8881b0c26ccbc120775ed38b" title="the main event loop." alt="" coords="495,5,577,37"/></map>
</div>
</p>

</div>
</div>
<hr/><h2>Variable Documentation</h2>
<a class="anchor" id="aafb584a009e319bc5b3cf6dc57227c63"></a><!-- doxytag: member="ctrl_eventloop.c::clients_list_for_cleanup" ref="aafb584a009e319bc5b3cf6dc57227c63" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="structupk__conn__handle__meta__p.html">upk_conn_handle_meta_t</a>* <a class="el" href="ctrl__eventloop_8c.html#aafb584a009e319bc5b3cf6dc57227c63">clients_list_for_cleanup</a><code> [static]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

</div>
</div>
<a class="anchor" id="a09a9da48820270547e0a56b3d6e98bd1"></a><!-- doxytag: member="ctrl_eventloop.c::ctrl_signal_queue" ref="a09a9da48820270547e0a56b3d6e98bd1" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="structctrl__sigqueue__meta__p.html">ctrl_sigqueue_meta_t</a>* <a class="el" href="ctrl__eventloop_8c.html#a09a9da48820270547e0a56b3d6e98bd1">ctrl_signal_queue</a><code> [static]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

</div>
</div>
</div>
<hr class="footer"/><address class="footer"><small>Generated on Wed Dec 7 2011 for upkeeper by&#160;
<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/></a> 1.7.4 </small></address>
</body>
</html>
